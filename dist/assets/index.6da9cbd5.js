(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function r(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerpolicy&&(o.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?o.credentials="include":t.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(t){if(t.ep)return;t.ep=!0;const o=r(t);fetch(t.href,o)}})();function m(e){const n=document.querySelector("#users-select");e.map(r=>{const s=document.createElement("option");s.setAttribute("value",r.id),s.innerText=r.firstName,n.appendChild(s)})}function a(e){if(e.length===0)return;const n=document.querySelector("#posts-section"),r=document.querySelector("#featured-post-title"),s=document.querySelector("#featured-post-body"),t=document.querySelector("#related-posts-section");n.classList.remove("invisible");const o=[...e],c=o.pop();if(r.innerText=c.title,s.innerText=c.body,o.length===0)return;const i=document.createElement("h2");i.innerText="Related posts",t.appendChild(i),o.map(d=>{const l=document.createElement("p");l.innerText=d.title,t.appendChild(l)})}function f(e){if(e.length===0)return;const n=document.querySelector("#featured-post-comments"),r=document.createElement("h3");r.innerText="Comments",n.appendChild(r),e.map(s=>{const t=document.createElement("p");t.innerText=s.body,n.appendChild(t)})}function p(e){const n=document.querySelector("#error-message");n.classList.remove("invisible"),n.innerText=e}function y(){const e=document.querySelector("#posts-section"),n=document.querySelector("#featured-post-title"),r=document.querySelector("#featured-post-body"),s=document.querySelector("#related-posts-section"),t=document.querySelector("#featured-post-comments"),o=document.querySelector("#error-message");n.innerHTML="",r.innerHTML="",s.innerHTML="",t.innerHTML="",o.innerHTML="",e.classList.add("invisible"),o.classList.add("invisible")}const u=document.querySelector("#users-select"),h="https://dummyjson.com/users";fetch(h).then(e=>e.json()).then(e=>m(e.users));u.addEventListener("change",()=>{y(),fetch(`https://dummyjson.com/posts/user/${u.value}`).then(e=>e.json()).then(e=>(a(e.posts),fetch(`https://dummyjson.com/posts/${e.posts[0].id}/comments`))).then(e=>e.json()).then(e=>f(e.comments)).catch(e=>p(e.message))});
